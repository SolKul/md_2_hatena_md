# mdをはてな記法にパースする
markdownをはてなブログのはてな記法にパースするプログラムです。`md_parser`フォルダ内の`md_parser.py`を次のようにインポートして使います。

```python
from md_parser import md_parser
md_parser.parse_md_to_hatena(pathlib.Pathオブジェクト)
```
## 動機
はてなブログのmarkdownは数式をうまく扱えないし、Markdownはいろいろ背景色を買えられないとカスタマイズ性が低い。MathJaxは重いので、将来的にはサーバーサイドで処理もしたい。その一方プレビューしながら文章や数式を書きたいという欲望もある。

そこで、VSCodeのMarkdown Preview EnhancedでMarkdownをプレビューしながら文章や数式を書き、それをパースすることにしました。

## 注意
うまくパースできなくても責任は取れないです。あくまでこういう事ができるという例です。

## 必要環境
python3.8以上。`pathilib`、`markdown`モジュールを使います。

## 例
main.pyを実行すると`Hydrogen.md`がパースされ、パースされた`Hydrogen_hatena.txt`というファイルができるはずです。

## 対応しているもの、していないもの

`$$`で囲まれたブロック数式、`$`で囲まれたインライン数式、表、`#`が2つか3つのヘッダーには対応しています。
基本的に`markdown`モジュールがパースできるものはパースできるはずです。githubと同様、適度に改行しないとパースできないので注意(そのため`markdown-preview-enhanced.breakOnSingleNewLine`はオフ推奨)

また画像には対応していません。はてなブログに対応した方法で画像を貼り付けたほうがいいと思われるので。

## 実装

もとの`md`ファイルをリスト化し、文章全体を標準ブロック、数式ブロックなどとブロックごとのリストに分けてます。そして、標準ブロックは`markdown`モジュールでパースし、数式ブロックははてなブログ用の数式フォーマットになるようにパースしています。